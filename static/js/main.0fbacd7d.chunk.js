(this.webpackJsonpchucknorris_talk=this.webpackJsonpchucknorris_talk||[]).push([[0],{15:function(e,t,a){e.exports={thumb:"ChatItem_thumb__1Krso",list:"ChatItem_list__1mDp1",item:"ChatItem_item__2PmsF",dispatchedMessage:"ChatItem_dispatchedMessage__1uyiF"}},16:function(e,t,a){e.exports={formMessage:"DataEntry_formMessage__rGXSo",dataEntry:"DataEntry_dataEntry__1gg5X",button:"DataEntry_button__1Y2X7"}},20:function(e,t,a){e.exports={list:"ChatList_list__3xhqF",item:"ChatList_item__36jns"}},21:function(e,t,a){e.exports={icon:"ChatUser_icon__2i8Mj",info:"ChatUser_info__2Lbs8"}},22:function(e,t,a){e.exports={message:"LastMessage_message__Z_J7c",date:"LastMessage_date__1twHD"}},23:function(e,t,a){e.exports={infoBord:"ChatBoard_infoBord__3Kh17",avatar:"ChatBoard_avatar__3wSwJ"}},25:function(e,t,a){e.exports={answerDate:"ChatAnswer_answerDate__1763x",answer:"ChatAnswer_answer__kex31"}},35:function(e,t,a){e.exports={title:"Title_title__TU5kK"}},36:function(e,t,a){e.exports={aside:"Sidebar_aside__1QX09"}},38:function(e,t,a){e.exports={section:"TextField_section__2t9TJ"}},39:function(e,t,a){e.exports={container:"Wrapper_container__1_U2Q"}},45:function(e,t,a){},46:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(11),r=a.n(s),o=(a(45),a(46),a(14)),i=(a(26),a(3)),u=a(19),l=a(8),j=a.n(l),h=a(2);function f(e){var t=e.value,a=e.onChange;return Object(h.jsxs)("section",{className:j.a.section,children:[Object(h.jsx)("div",{className:j.a.thumb,children:Object(h.jsx)(u.b,{})}),Object(h.jsxs)("label",{className:j.a.search,children:[Object(h.jsx)(u.a,{}),Object(h.jsx)("input",{className:j.a.searchEntry,type:"text",name:"filter",value:t,onChange:a,placeholder:"Search or start new chat"})]})]})}var m=a(35),b=a.n(m);function d(){return Object(h.jsx)("h2",{className:b.a.title,children:"Chats"})}var _=a(5),g=a(13),O=a.n(g),x=a(6),v=a.n(x),p=a(20),N=a.n(p),C=function(e,t){var a=e.toLowerCase();if(t)return t.filter((function(e){return e.senderName.toLowerCase().includes(a)}))},w=a(21),S=a.n(w),k=a(22),E=a.n(k);function T(e){var t=e.last,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],r=c[1];Object(n.useEffect)((function(){console.log("im change last message"),r(t)}),[]);var o=s.messageText,u=s.answerText,l=s.createdAt;return Object(h.jsxs)("p",{className:E.a.message,children:[function(e){return String(e).length>40?" ".concat(String(e).slice(0,50),"... "):e}(o||u),Object(h.jsx)("span",{className:E.a.date,children:l})]})}function y(e){var t=e.config,a=t.avatar,n=t.senderName,c=t.dialogue;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{className:S.a.icon,src:"/chucknorris_talk"+a,alt:"avatar"}),Object(h.jsxs)("div",{className:S.a.info,children:[Object(h.jsx)("p",{children:n}),n&&Object(h.jsx)(T,{last:c[c.length-1]})]})]})}function M(e){var t=e.searchUser,a=e.onSubmit,c=Object(n.useState)(""),s=Object(i.a)(c,2),r=s[0],o=s[1];Object(n.useEffect)((function(){v.a.get("".concat("http://localhost:3000/messages")).then((function(e){e.data.forEach((function(e){o((function(t){return[].concat(Object(_.a)(t),[e])}))}))})).catch((function(e){console.log("error from json server",e)}))}),[]);var u=function(e){a(e.currentTarget.id)},l=0===t.length?r:C(t,r);return Object(h.jsx)("ul",{className:N.a.list,children:r&&l.map((function(e){return Object(h.jsx)("li",{className:N.a.item,id:e.id,onClick:u,children:Object(h.jsx)(y,{config:e})},O.a.generate())}))})}var D=function(e,t){var a=Object(n.useState)((function(){var a;return null!==(a=JSON.parse(window.localStorage.getItem(e)))&&void 0!==a?a:t})),c=Object(i.a)(a,2),s=c[0],r=c[1];return Object(n.useEffect)((function(){window.localStorage.setItem(e,JSON.stringify(s))}),[e,s]),[s,r]},I=a(36),F=a.n(I);function L(e){var t=e.saveID,a=D("currentId",""),c=Object(i.a)(a,2),s=c[0],r=c[1],o=D("filter",""),u=Object(i.a)(o,2),l=u[0],j=u[1];Object(n.useEffect)((function(){t(s)}),[s,t]);return Object(h.jsxs)("aside",{className:F.a.aside,children:[Object(h.jsx)(f,{value:l,onChange:function(e){var t=e.currentTarget.value;j(t)}}),Object(h.jsx)(d,{}),Object(h.jsx)(M,{onSubmit:function(e){return r(e)},searchUser:l})]})}var U=a(23),J=a.n(U);function B(e){var t=e.avatar,a=e.name;return Object(h.jsxs)("div",{className:J.a.infoBord,children:[Object(h.jsx)("img",{className:J.a.avatar,src:"/chucknorris_talk"+t,alt:"avatar"}),Object(h.jsx)("p",{children:a})]})}var P=a(40),A=a(15),K=a.n(A),Z=a(24),W=a.n(Z);function X(){var e=new Date;return"".concat(W()(e).format("l")," ").concat(W()(e).format("LT"))}function Y(e){return v.a.get("".concat("http://localhost:3000/messages","?id=").concat(""===e?"WYZpppK7Js":e)).then((function(e){return e})).catch((function(e){console.log("error from json server",e)}))}function H(e,t){console.log(e);var a=e.id,n=e.senderName,c=e.avatar,s=e.dialogue;return v.a.put("".concat("http://localhost:3000/messages","/").concat(a||"WYZpppK7Js","/"),{id:a,avatar:c,senderName:n,dialogue:[].concat(Object(_.a)(s),[t])}).then((function(e){return e})).catch((function(e){console.log("error from json server",e)}))}var Q=a(9),R=a.n(Q);function q(e){var t=e.avatar,a=e.message,n=e.date;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:R.a.thumb,children:[" ",Object(h.jsx)("img",{className:R.a.avatar,src:"/chucknorris_talk"+t,alt:"avatar"}),Object(h.jsx)("p",{className:R.a.message,children:a})]}),Object(h.jsx)("span",{className:R.a.date,children:n})]})}var G=a(25),z=a.n(G);function V(e){var t=e.answer,a=e.date;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{className:z.a.answer,children:t}),Object(h.jsx)("span",{className:z.a.answerDate,children:a})]})}var $=["id","senderName","avatar"];function ee(e){var t=e.newMessage,a=e.user,c=Object(n.useRef)(),s=a.id,r=(a.senderName,a.avatar),u=(Object(P.a)(a,$),Object(n.useState)([])),l=Object(i.a)(u,2),j=l[0],f=l[1];return Object(n.useEffect)((function(){Y(s).then((function(e){console.log("im changed chatItem"),f(e.data[0].dialogue)}))}),[a]),Object(n.useEffect)((function(){""!==t&&""!==t.answerText&&(console.log(j),H(a,t).then((function(e){200===e.status&&f((function(e){return[].concat(Object(_.a)(e),[t])}))})),setTimeout((function(){fetch("https://api.chucknorris.io/jokes/random").then((function(e){return e.ok?e.json():Promise.reject(new Error(" Something wrong :( "))})).then((function(e){c.current=e;var t={messageText:c.current.value,createdAt:X()};H(a,t).then((function(e){200===e.status&&(o.b.success(" Chuck Norris talk ..."),f((function(e){return[].concat(Object(_.a)(e),[t])})))}))}))}),15e3))}),[t]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("ul",{className:K.a.list,children:j&&j.map((function(e){var t=e.messageText,a=e.answerText,n=e.createdAt;return Object(h.jsx)("li",{className:"".concat(K.a.item," ").concat(a&&K.a.dispatchedMessage),children:t?Object(h.jsx)(q,{avatar:r,message:t,date:n}):Object(h.jsx)(V,{answer:a,date:n})},O.a.generate())}))})})}var te=a(37),ae=a(16),ne=a.n(ae);function ce(e){var t=e.onChange,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],r=c[1];return Object(h.jsxs)("form",{className:ne.a.formMessage,onSubmit:function(e){e.preventDefault(),t(s),r("")},children:[Object(h.jsx)("input",{className:ne.a.dataEntry,type:"text",name:"filter",value:s,onChange:function(e){var t=e.target.value;r(t)},placeholder:"Type your message"}),Object(h.jsx)("button",{className:ne.a.button,type:"submit",children:Object(h.jsx)(te.a,{})})]})}var se=a(38),re=a.n(se);function oe(e){var t=e.tranferID,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)({}),u=Object(i.a)(o,2),l=u[0],j=u[1],f=l.senderName,m=l.avatar;Object(n.useEffect)((function(){Y(t).then((function(e){console.log("im changed textfield"),j(e.data[0])}))}),[t]);return Object(h.jsxs)("section",{className:re.a.section,children:[Object(h.jsx)(B,{avatar:m,name:f}),Object(h.jsx)(ee,{user:l,newMessage:s}),Object(h.jsx)(ce,{onChange:function(e){r({answerText:e,createdAt:X()})}})]})}var ie=a(39),ue=a.n(ie);function le(){var e=D("currentId",""),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(h.jsxs)("section",{className:ue.a.container,children:[Object(h.jsx)(L,{saveID:function(e){return n(e)}}),Object(h.jsx)(oe,{tranferID:a})]})}var je=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(le,{}),Object(h.jsx)(o.a,{})]})},he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,77)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(je,{})}),document.getElementById("root")),he()},8:function(e,t,a){e.exports={section:"UserSearch_section__1BCrP",thumb:"UserSearch_thumb__2r6rg",search:"UserSearch_search__DTHtL",searchEntry:"UserSearch_searchEntry__7PZCR"}},9:function(e,t,a){e.exports={thumb:"ChatMessage_thumb__2MWaP",avatar:"ChatMessage_avatar__1f-NZ",date:"ChatMessage_date__3Oc1L",message:"ChatMessage_message__3sxE6"}}},[[76,1,2]]]);
//# sourceMappingURL=main.0fbacd7d.chunk.js.map